<!DOCTYPE html>
<html>
<head>
    <title>cQHEI Survey Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card-header {
            background-color: #6c757d;
            color: white;
            font-weight: bold;
        }
        .required::after {
            content: " *";
            color: red;
        }
    </style>
</head>

<body>
<div class="container mt-4">

<h1 class="text-center mb-4">cQHEI Survey Form</h1>

<form method="post">
{% csrf_token %}

<!-- ================= BASIC INFORMATION ================= -->
<div class="card mb-4">
<div class="card-header">Basic Information</div>
<div class="card-body">

<div class="row mb-3">
  <div class="col-md-4">
    <label class="required">Date</label>
    {{ form.survey_date }}
  </div>
  <div class="col-md-4">
    <label class="required">River Code</label>
    {{ form.river_code }}
  </div>
  <div class="col-md-4">
    <label class="required">River Mile</label>
    {{ form.river_mile }}
  </div>
</div>

<div class="row mb-3">
  <div class="col-md-4">
    <label class="required">Name / Group</label>
    {{ form.name_group }}
  </div>
  <div class="col-md-4">
    <label class="required">River Site</label>
    {{ form.river_site }}
  </div>
  <div class="col-md-4">
    <label>Clarity</label>
    {{ form.clarity }}
  </div>
</div>

<div class="row mb-3">
  <div class="col-md-4">
    <label>Forest / ULE Number</label>
    {{ form.forest_ule_number }}
  </div>
  <div class="col-md-4">
    <label>Cluster Number</label>
    {{ form.cluster_number }}
  </div>
  <div class="col-md-4">
    <label class="required">Length of Reach Evaluated</label>
    {{ form.reach_length }}
  </div>
</div>

<div class="row" id="reach-length-other-row" style="display:none;">
  <div class="col-12 mb-3">
    <label class="form-label">If Other, specify exact length</label>
    {{ form.reach_length_custom }}
  </div>
</div>

</div>
</div>

<!-- ================= SECTION I ================= -->
<div class="card mb-4">
<div class="card-header">I. Substrate (Bottom Type) - Check 1 or Check 2 and Average</div>
<div class="card-body">

<strong>a.) Size:</strong><br>
{{ form.substrate_mostly_large }} Mostly Large Fist Size or Bigger (14 pts)<br>
{{ form.substrate_mostly_medium }} Mostly Medium Smaller Than Fist But Bigger Than Fingernail (10 pts)<br>
{{ form.substrate_mostly_small }} Mostly Small Smaller Than Fingernail, But Still Coarse (6 pts)<br>
{{ form.substrate_dominated_bedrock }} Dominated By Bedrock (3 pts)<br>
{{ form.substrate_mostly_very_fine }} Mostly Very Fine, Not Coarse, Sometimes Greasy or Mucky (0 pts)<br><br>

<strong>b.) "Smothering"</strong><br>
Symptoms: Hard to Move Large Pieces, Often Black on Bottom/W/Few Insects<br>
{{ form.smothering_no }} No (10 pts)<br>
{{ form.smothering_yes }} Yes (0 pts)<br><br>

<strong>c.) "Silting"</strong><br>
Symptoms: Light Kicking of Bottom Clouds Stream, Clouding of Stream for More than a Minute or Two<br>
{{ form.silting_no }} No (10 pts)<br>
{{ form.silting_yes }} Yes (0 pts)

</div>
</div>

<!-- ================= SECTION II ================= -->
<div class="card mb-4">
  <div class="card-header">
    II. Fish Cover (Hiding Places)
  </div>

  <!-- Cover score display (always visible label) -->
  <div class="card-body bg-light text-center border-bottom">
    <strong>Cover Score:</strong>
    <span class="fs-4">
      {% if section2_score is not None %}
        {{ section2_score }}
      {% else %}
        â€”
      {% endif %}
    </span>
  </div>

  <div class="card-body">
    Check All that Apply:<br><br>

    {{ form.cover_underwater_tree_roots_large }}
    Underwater Tree Roots (Large) (2 pts)<br>

    {{ form.cover_underwater_tree_rootlets }}
    Underwater Tree Rootlets (Fine) (2 pts)<br>

    {{ form.cover_boulders }}
    Boulders (2 pts)<br>

    {{ form.cover_backwaters }}
    Backwaters, Oxbows or Side Channels (2 pts)<br>

    {{ form.cover_downed_trees }}
    Downed Trees, Logs, Branches (2 pts)<br>

    {{ form.cover_deep_areas }}
    Deep Areas (Chest Deep) (2 pts)<br>

    {{ form.cover_undercut_banks }}
    Undercut Banks (2 pts)<br>

    {{ form.cover_water_plants }}
    Water Plants (2 pts)<br>

    {{ form.cover_shallow_slow_areas }}
    Shallow, Slow Areas for Small Fish (2 pts)<br>

    {{ form.cover_shrubs_small_trees }}
    Shrubs, Small Trees That Hang Close Over the Bank (2 pts)
  </div>
</div>

<!-- ================= SECTION III ================= -->
<div class="card mb-4">
<div class="card-header">III. Stream Shape and Human Alterations - Check 1 or Check 2 and Average</div>
<div class="card-body">

<strong>a.) "Curviness" or "Sinuosity" of Channel:</strong><br>
{{ form.curviness_two_plus_good_bends }} 2 or More Good Bends (9 pts)<br>
{{ form.curviness_one_two_good_bends }} 1 or 2 Good Bends (6 pts)<br>
{{ form.curviness_mostly_straight }} Mostly Straight Some "Wiggle" (3 pts)<br>
{{ form.curviness_very_straight }} Very Straight (0 pts)<br><br>

<strong>b.) How Natural Is The Site?</strong><br>
{{ form.natural_mostly_natural }} Mostly Natural (12 pts)<br>
{{ form.natural_minor_changes }} A Few Minor Man-made Changes (9 pts)<br>
{{ form.natural_many_changes }} Many Man-made Changes (6 pts)<br>
{{ form.natural_heavy_changes }} Heavy, Man-made Changes (0 pts)

</div>
</div>

<!-- ================= SECTION IV ================= -->
<div class="card mb-4">
<div class="card-header">IV. Stream Forests & Wetlands ("Riparian Area") & Erosion - Check 1 or Check 2 and Average</div>
<div class="card-body">

<strong>a.) Width - Mostly:</strong><br>
{{ form.width_wide }} Wide (9 pts)<br>
{{ form.width_narrow }} Narrow (5 pts)<br>
{{ form.width_none }} None (0 pts)<br><br>

<strong>b.) Land Use - Mostly:</strong><br>
{{ form.landuse_forest_wetland }} Forest/Wetland (5 pts)<br>
{{ form.landuse_shrubs }} Shrubs (4 pts)<br>
{{ form.landuse_overgrown_fields }} Overgrown Fields (3 pts)<br>
{{ form.landuse_fenced_pasture }} Fenced Pasture (2 pts)<br>
{{ form.landuse_park }} Park (2 pts)<br>
{{ form.landuse_conservation_tillage }} Conservation Tillage (2 pts)<br><br>

<strong>c.) Bank Erosion - Typically:</strong><br>
{{ form.erosion_urban_industrial }} Urban/Industrial (4 pts)<br>
{{ form.erosion_open_pasture }} Open Pasture (2 pts)<br>
{{ form.erosion_suburban_rowcrop }} Suburban (0 pts)<br>
{{ form.erosion_raw_collapsing }} Raw, Collapsing Banks (0 pts)<br><br>

<strong>d.) How Much of Stream is Shaded?</strong><br>
{{ form.shading_mostly }} Mostly (3 pts)<br>
{{ form.shading_partly }} Partly (2 pts)<br>
{{ form.shading_none }} None (0 pts)

</div>
</div>

<!-- ================= SECTION V ================= -->
<div class="card mb-4">
<div class="card-header">V. Depth & Current Velocity - Check 1 or Check 2 and Average</div>
<div class="card-body">

<strong>a.) Deepest Pool Is At Least:</strong><br>
{{ form.depth_chest_deep }} Chest Deep (8 pts)<br>
{{ form.depth_waist_deep }} Waist Deep (6 pts)<br>
{{ form.depth_knee_deep }} Knee Deep (4 pts)<br>
{{ form.depth_ankle_deep }} Ankle Deep (0 pts)<br><br>

<strong>b.) Check ALL The Flow Types That You See:</strong><br>
{{ form.flow_very_fast }} Very Fast (2 pts)<br>
{{ form.flow_fast }} Fast (3 pts)<br>
{{ form.flow_moderate }} Moderate (1 pt)<br>
{{ form.flow_slow }} Slow (1 pt)<br>
{{ form.flow_none }} No Flow

</div>
</div>

<!-- ================= SECTION VI ================= -->
<div class="card mb-4">
<div class="card-header">VI. Riffles/Runs (Areas Where Current is Fast/Turbulent, Surface May Be Broken)</div>
<div class="card-body">

<strong>a.) Riffles/Runs Are:</strong><br>
{{ form.riffles_knee_deep_fast }} Knee Deep or Deeper & Fast (8 pts)<br>
{{ form.riffles_ankle_calf_fast }} Ankle/Calf Deep & Fast (6 pts)<br>
{{ form.riffles_ankle_shallow_slow }} Ankle Deep or Less & Slow (4 pts)<br>
{{ form.riffles_none }} Do Not Exist (0 pts)<br><br>

<strong>b.) Riffle/Run Substrates Are:</strong><br>
{{ form.substrate_fist_size }} Fist Size or Larger (7 pts)<br>
{{ form.substrate_smaller_fist }} Smaller Than Fist, Larger Than Fingernail (4 pts)<br>
{{ form.substrate_smaller_fingernail }} Smaller Than Fingernails (0 pts)

</div>
</div>

<div class="text-center mb-5">
<button type="submit" class="btn btn-primary btn-lg">Submit Survey</button>
</div>

</form>
<!-- AZURE TEMPLATE TEST: 2026-01-04 -->

</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const select = document.getElementById("id_reach_length");
  const otherRow = document.getElementById("reach-length-other-row");
  const otherInput = document.getElementById("id_reach_length_custom");

  if (!select || !otherRow || !otherInput) return;

  function toggle() {
    if (select.value === "other") {
      otherRow.style.display = "block";
      otherInput.required = true;
    } else {
      otherRow.style.display = "none";
      otherInput.required = false;
      otherInput.value = "";
    }
  }

  select.addEventListener("change", toggle);
  toggle(); // handle reload / validation error
});
</script>

</body>
</html>
